{% extends "profiles/base.html" %}

{% load i18n %}
{% load pagination_tags %}
{% load avatar_tags %}
{% load humanize %}
{% load profile_tags %}

{% block head_title %}{% blocktrans %}All Profiles{% endblocktrans %}{% endblock %}

{% block body %}
    <h1>{% trans "Profiles" %}</h1>


{# is this hidden properly on other pages? #}

<ul class="segmented" id="groupheader" style="float: none;">
        <li id="li-group-postsearch"><a href="{% url search %}?q=" id="show-postsearch">Search posts and events</a></li>
        <li id="li-group-peoplesearch" class="current"><a href="#people-search" id="show-peoplesearch">People Search</a></li>

    </ul>


    <div id="div-people-search" class="group-subsection" style="display: block;">


	{% show_profile_search search_terms %}

    </div>
    <br/><br/>
    
    {% if users %}
	    {% autopaginate users %}
    
    	{% for user in users %}
	        <div class="profile clearfix" style="height: 45px;">
            	{# @@@ factor out style into css file #}
            	<div style="float: left;">{% avatar user 40 %}</div>
            	<div style="padding: 5px; margin-left: 50px;">
	                <a href="{% url profile_detail user.username %}">{{ user.visible_name }}</a>
	            </div>
        	</div>
    	{% endfor %}

	    {% paginate %}
    {% else %}
    	{% if search_terms %}
    		No results
    	{% endif %}
    {% endif %}
    
{% endblock %}

{% block extra_body %}
  <script type="text/javascript">
  $(document).ready(function(){
    
    // maintain search term state
    $('#profile-search-box').change(function() {
        
        $('#show-postsearch').attr('href', '{% url search %}?q=' + $(this).val());
        
    });
    // initial load
    $('#show-postsearch').attr('href', '{% url search %}?q=' + $('#profile-search-box').val());

    
  });
  </script>
  
    <script type="text/javascript" src="{{STATIC_URL}}js/tabselection.js"></script> 


{% endblock %}
  
